# ğŸ¡ PLAYWRIGHT_GPT - AI-Powered Test Automation ğŸš€  


â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—               â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ•”â•â•â•              â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘ â–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘   
â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘       â•šâ•â•â•â•â•    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•    â–ˆâ–ˆâ•‘   
â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘                 â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•‘   
â•šâ•â•     â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•   â•šâ•â•    â•šâ•â•â•â•šâ•â•â• â•šâ•â•  â•šâ•â•â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•   â•šâ•â•                  â•šâ•â•â•â•â•â• â•šâ•â•        â•šâ•â•   
                                                                                                                        


## ğŸ“Œ Overview  
**PLAYWRIGHT_GPT** is a next-gen **AI-powered test automation framework** using:
- **[Playwright](https://playwright.dev/)** for end-to-end browser automation  
- **GPT-based locators** to dynamically identify elements for resilient tests  
- **Parallel execution** with multiple workers for efficiency  
- **Data-driven testing** with CSV inputs for flexible test cases  

---

## ğŸš€ Features  
âœ… **Dynamic Locators with GPT** â€“ No hardcoded selectors, AI finds elements  
âœ… **Parallel Test Execution** â€“ Runs multiple tests simultaneously for speed  
âœ… **Data-Driven Testing** â€“ Uses CSV to drive different user scenarios  
âœ… **Caching Strategy** â€“ Avoids unnecessary GPT calls for performance  
âœ… **Headless & Headed Mode Support** â€“ Choose between fast execution or debugging  
âœ… **Easy GitHub Integration** â€“ Ready for CI/CD  

---

## ğŸ”§ Setup & Installation  

### **1ï¸âƒ£ Clone the Repository**
```bash
git clone https://github.com/rkennedy97/playwrightGPT.git
cd playwrightGPT
```

### **2ï¸âƒ£ Install Dependencies**
```bash
npm install
```

### **3ï¸âƒ£ Install Playwright Browsers**
```bash
npx playwright install
```

---

## ğŸƒ Running Tests  

### **1ï¸âƒ£ Run All Tests in Parallel**
```bash
npx playwright test --workers=2
```

### **2ï¸âƒ£ Run a Specific Test**
```bash
npx playwright test tests/GPTTest.spec.ts
```

### **3ï¸âƒ£ Run Tests in Headless Mode**
```bash
npx playwright test --headed=false
```

---

## ğŸ‘¤ Folder Structure  

```
playwrightGPT/
â”‚â”€â”€ data/                      # Test data (CSV)
â”‚   â””â”€â”€ testData.csv
â”‚â”€â”€ prompts/                   # GPT-generated locators
â”‚   â”œâ”€â”€ gptCache_purchaseFlow.json
â”‚   â”œâ”€â”€ prompts.json
â”‚â”€â”€ tests/                      # Playwright test specs
â”‚   â”œâ”€â”€ GPTTest.spec.ts         # Main Playwright test file
â”‚â”€â”€ utilities/Common/           # Reusable utility functions
â”‚   â”œâ”€â”€ gptLib.ts               # GPT locator cache & helpers
â”‚   â”œâ”€â”€ commonMethods.ts        # General utility functions
â”‚â”€â”€ playwright.config.ts        # Playwright configuration
â”‚â”€â”€ package.json                # Project dependencies
â”‚â”€â”€ README.md                   # You're reading this!
â””â”€â”€ tsconfig.json                # TypeScript configuration
```

---

## ğŸ¯ How It Works  

### **ğŸ§  GPT-Powered Locators**  
Instead of relying on **hardcoded selectors** (CSS/XPath), we let **GPT dynamically identify elements**, making tests more **resilient to UI changes**.

### **âš¡ Parallel Execution**
Using:
- `test.describe.parallel()`  
- `workers: 2` in `playwright.config.ts`  

This ensures **fast execution** across multiple tests.

### **ğŸ“Š Data-Driven Testing**
Tests read user data from **CSV files** (`testData.csv`), allowing **parameterized test cases**.


Extraction & Pruning

We added extractRelevantHTML.ts, which prunes scripts, styles, large base64 images, etc. before sending snippets to GPT.
This prevents token overflow and focuses GPT on relevant elements.
Caching & GPT

We continue to cache locators in JSON to avoid repeated GPT calls.
Now we have short emoji logs indicating when GPT is called and responds.
Date Input Handling

We discovered <input type="date"> needs YYYY-MM-DD format.
We convert CSV data from DD/MM/YYYY to the correct ISO format in the test.
Parallel Execution & Worker Setup

By default, we run with workers=2, parallelizing tests for faster coverage.
Optional Manual Overrides

If GPT occasionally guesses incorrectly for a crucial element (like the â€œshopping cart linkâ€), you can override with a known stable locator or a dictionary for those steps.

**Detailed Extraction Process**

1. Raw HTML Pruning (Optional)

2 . In regexPrune.ts, we strip out large comments, data attributes, or other raw text bloat using regex. DOM-Based Pruning (pruneHtml.ts)

3. We parse the pruned string with JSDOM, then remove:
	3.1 script and style tags
	3.2 link rel="stylesheet"  and meta tags
	3.3 Base64-encoded images img src "dataimage"
	3.4 Inline styles and other large irrelevant parts
	3.5 Generate a Final Snippet

4. After pruning we produce a cleaned HTML string.
	4.1 Optionally log it to ./logs/cleaned_html_1234.html for debugging.

5. Send to GPT
6. We call getLocatorFromGPT3_5(prompt, cleanedHTML) or GPT-4.
7. GPT returns a JSON with "action" (fill/click/select) and "selector" (like #login-button).
8. We store the final locator in gptCache json
9. If the selector fails in Playwright, we remove it from cache and re-try.
10. For known stable elements or date inputs, we can override the format or fill logic. Or skip GPT entirely for certain steps, if needed.

**Why This Matters**
Without pruning, huge HTML can cause GPT to exceed context limits (16k tokens).
With minimal relevant HTML, GPT is more accurate and runs faster.

---

## ğŸ“¢ Contributing  
We welcome contributions! If you find bugs or have ideas for improvements:
1. **Fork the repository**  
2. **Create a feature branch** (`git checkout -b feature-new-improvement`)  
3. **Commit changes** (`git commit -m "Added feature XYZ"`)  
4. **Push to GitHub and open a Pull Request** ğŸ‰  

---

## ğŸ”§ Future Enhancements  
- âœ… **[Planned] CI/CD Pipeline** (GitHub Actions Integration)  
- âœ… **[Planned] Allure & HTML Test Reporting**  
- âœ… **[Planned] More Test Cases**  

---

## ğŸ“ License  
This project is private and not intended for distribution.
All rights reserved. Unauthorized use, copying, or distribution of this code is prohibited.

---

## ğŸ’Œ Questions?  
If you have any issues or suggestions, feel free to **open an issue** on GitHub!  

---

